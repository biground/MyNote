# 闭包
在Lua中，函数是严格遵循词法定界的第一类值
## 第一类值
“第一类值”意味着Lua语言中的函数与其他常见类型的值(例如数值和字符串)具有同等权限:一个程序可以将某个函数保存到变量中(全局变量和局部变量均可)或表中，也可以将某个函数作为参数传递给其他函数，还可以将某个函数作为其他函数的返回值返回。

在Lua中，所有的函数都是匿名的。像其他所有的值一样，函数没有名字。当讨论函数名时，比如print，实际上指的是保存该函数的变量。

### 非全局函数
由于函数是一种“第一类值”，因此一个显而易见的结果就是:函数不仅可以被存储在全局变量中，还可以被存储在表字段和局部变量中。

当把一个函数存储到局部变量时，就得到了一个局部函数(local function)，即一个被限定在指定作用域中使用的函数。局部函数对于包(package)而言尤其有用:由于Lua语言将每个程序段(chunk)作为一个函数处理，所以在一段程序中声明的函数就是局部函数，这些局部函数只在该程序段中可见。词法定界保证了程序段中的其他函数可以使用这些局部函数。

## 词法定界
“词法定界”意味着Lua语言中的函数可以访问包含其自身的外部函数中的变量(也意味着Lua语言完全支持Lambda演算)。

当编写一个被其他函数B包含的函数A时，被包含的函数A可以访问包含其的函数B的所有局部变量，我们将这种特性称为词法定界(lexical scoping)。虽然这种可见性规则听上去很明确，但实际上并非如此。词法定界外加嵌套的第一类值函数可以为编程语言提供强大的功能，但很多编程语言并不支持将这两者组合使用。